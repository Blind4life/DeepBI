import tiktoken


# 定义函数 num_tokens_from_messages，该函数返回由一组消息所使用的token数。
def num_tokens_from_messages(messages, model="gpt-3.5-turbo"):
    """Return the number of tokens used by a list of messages."""
    # 尝试获取模型的编码
    try:
        encoding = tiktoken.encoding_for_model(model)
    except KeyError:
        # 如果模型没有找到，使用 cl100k_base 编码并给出警告
        print("Warning: model not found. Using cl100k_base encoding.")
        encoding = tiktoken.get_encoding("cl100k_base")
    # 针对不同的模型设置token数量
    if model in {
        "gpt-3.5-turbo-0613",
        "gpt-3.5-turbo-16k-0613",
        "gpt-4-0314",
        "gpt-4-32k-0314",
        "gpt-4-0613",
        "gpt-4-32k-0613",
    }:
        tokens_per_message = 3
        tokens_per_name = 1
    elif model == "gpt-3.5-turbo-0301":
        tokens_per_message = 4  # 每条消息遵循 {role/name}\n{content}\n 格式
        tokens_per_name = -1  # 如果有名字，角色会被省略
    elif "gpt-3.5-turbo" in model:
        # 对于 gpt-3.5-turbo 模型可能会有更新，此处返回假设为 gpt-3.5-turbo-0613 的token数量，并给出警告
        print("Warning: gpt-3.5-turbo may update over time. Returning num tokens assuming gpt-3.5-turbo-0613.")
        return num_tokens_from_messages(messages, model="gpt-3.5-turbo-0613")
    elif "gpt-4" in model:
        # 对于 gpt-4 模型可能会有更新，此处返回假设为 gpt-4-0613 的token数量，并给出警告
        print("Warning: gpt-4 may update over time. Returning num tokens assuming gpt-4-0613.")
        return num_tokens_from_messages(messages, model="gpt-4-0613")
    elif model in {
        "davinci",
        "curie",
        "babbage",
        "ada"
    }:
        print("Warning: gpt-3 related model is used. Returning num tokens assuming gpt2.")
        encoding = tiktoken.get_encoding("gpt2")
        num_tokens = 0
        # only calc the content
        for message in messages:
            for key, value in message.items():
                if key == "content":
                    num_tokens += len(encoding.encode(value))
        return num_tokens
    else:
        # 对于没有实现的模型，抛出未实现错误
        raise NotImplementedError(
            f"""num_tokens_from_messages() is not implemented for model {model}. See https://github.com/openai/openai-python/blob/main/chatml.md for information on how messages are converted to tokens."""
        )
    num_tokens = 0
    # 计算每条消息的token数
    for message in messages:
        num_tokens += tokens_per_message
        for key, value in message.items():
            num_tokens += len(encoding.encode(value))
            if key == "name":
                num_tokens += tokens_per_name
    num_tokens += 3  # 每条回复都以助手为首
    return num_tokens


if __name__ == '__main__':
    message = [
        {
            "role": "system",
            "content": """{"state":200,"sender":"redash","data":{"data_type":"mysql_code","content":{"data":{"columns":[{"name":"id","friendly_name":"id","type":"string"},{"name":"date","friendly_name":"date","type":"date"},{"name":"customer_name","friendly_name":"customer_name","type":"string"},{"name":"state","friendly_name":"state","type":"string"},{"name":"city","friendly_name":"city","type":"string"}],"rows":[{"id":"B-25601","date":"2018-04-01","customer_name":"Bharat","state":"Gujarat","city":"Ahmedabad"},{"id":"B-25602","date":"2018-04-01","customer_name":"Pearl","state":"Maharashtra","city":"Pune"},{"id":"B-25603","date":"2018-04-03","customer_name":"Jahan","state":"Madhya Pradesh","city":"Bhopal"},{"id":"B-25604","date":"2018-04-03","customer_name":"Divsha","state":"Rajasthan","city":"Jaipur"},{"id":"B-25605","date":"2018-04-05","customer_name":"Kasheen","state":"West Bengal","city":"Kolkata"},{"id":"B-25606","date":"2018-04-06","customer_name":"Hazel","state":"Karnataka","city":"Bangalore"},{"id":"B-25607","date":"2018-04-06","customer_name":"Sonakshi","state":"Jammu and Kashmir","city":"Kashmir"},{"id":"B-25608","date":"2018-04-08","customer_name":"Aarushi","state":"Tamil Nadu","city":"Chennai"},{"id":"B-25609","date":"2018-04-09","customer_name":"Jitesh","state":"Uttar Pradesh","city":"Lucknow"},{"id":"B-25610","date":"2018-04-09","customer_name":"Yogesh","state":"Bihar","city":"Patna"},{"id":"B-25611","date":"2018-04-11","customer_name":"Anita","state":"Kerala","city":"Thiruvananthapuram"},{"id":"B-25612","date":"2018-04-12","customer_name":"Shrichand","state":"Punjab","city":"Chandigarh"},{"id":"B-25613","date":"2018-04-12","customer_name":"Mukesh","state":"Haryana","city":"Chandigarh"},{"id":"B-25614","date":"2018-04-13","customer_name":"Vandana","state":"Himachal Pradesh","city":"Simla"},{"id":"B-25615","date":"2018-04-15","customer_name":"Bhavna","state":"Sikkim","city":"Gangtok"},{"id":"B-25616","date":"2018-04-15","customer_name":"Kanak","state":"Goa","city":"Goa"},{"id":"B-25617","date":"2018-04-17","customer_name":"Sagar","state":"Nagaland","city":"Kohima"},{"id":"B-25618","date":"2018-04-18","customer_name":"Manju","state":"Andhra Pradesh","city":"Hyderabad"},{"id":"B-25619","date":"2018-04-18","customer_name":"Ramesh","state":"Gujarat","city":"Ahmedabad"},{"id":"B-25620","date":"2018-04-20","customer_name":"Sarita","state":"Maharashtra","city":"Pune"},{"id":"B-25621","date":"2018-04-20","customer_name":"Deepak","state":"Madhya Pradesh","city":"Bhopal"},{"id":"B-25622","date":"2018-04-22","customer_name":"Monisha","state":"Rajasthan","city":"Jaipur"},{"id":"B-25623","date":"2018-04-22","customer_name":"Atharv","state":"West Bengal","city":"Kolkata"},{"id":"B-25624","date":"2018-04-22","customer_name":"Vini","state":"Karnataka","city":"Bangalore"},{"id":"B-25625","date":"2018-04-23","customer_name":"Pinky","state":"Jammu and Kashmir","city":"Kashmir"},{"id":"B-25626","date":"2018-04-23","customer_name":"Bhishm","state":"Maharashtra","city":"Mumbai"},{"id":"B-25627","date":"2018-04-23","customer_name":"Hitika","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25628","date":"2018-04-24","customer_name":"Pooja","state":"Bihar","city":"Patna"},{"id":"B-25629","date":"2018-04-24","customer_name":"Hemant","state":"Kerala","city":"Thiruvananthapuram"},{"id":"B-25630","date":"2018-04-24","customer_name":"Sahil","state":"Punjab","city":"Chandigarh"},{"id":"B-25631","date":"2018-04-24","customer_name":"Ritu","state":"Haryana","city":"Chandigarh"},{"id":"B-25632","date":"2018-04-25","customer_name":"Manish","state":"Himachal Pradesh","city":"Simla"},{"id":"B-25633","date":"2018-04-26","customer_name":"Amit","state":"Sikkim","city":"Gangtok"},{"id":"B-25634","date":"2018-04-26","customer_name":"Sanjay","state":"Goa","city":"Goa"},{"id":"B-25635","date":"2018-04-26","customer_name":"Nidhi","state":"Nagaland","city":"Kohima"},{"id":"B-25636","date":"2018-04-26","customer_name":"Nishi","state":"Maharashtra","city":"Mumbai"},{"id":"B-25637","date":"2018-04-26","customer_name":"Ashmi","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25638","date":"2018-04-26","customer_name":"Parth","state":"Maharashtra","city":"Pune"},{"id":"B-25639","date":"2018-04-27","customer_name":"Lisha","state":"Madhya Pradesh","city":"Bhopal"},{"id":"B-25640","date":"2018-04-27","customer_name":"Paridhi","state":"Rajasthan","city":"Jaipur"},{"id":"B-25641","date":"2018-04-27","customer_name":"Parishi","state":"West Bengal","city":"Kolkata"},{"id":"B-25642","date":"2018-04-28","customer_name":"Ajay","state":"Karnataka","city":"Bangalore"},{"id":"B-25643","date":"2018-04-29","customer_name":"Kirti","state":"Jammu and Kashmir","city":"Kashmir"},{"id":"B-25644","date":"2018-04-30","customer_name":"Mayank","state":"Maharashtra","city":"Mumbai"},{"id":"B-25645","date":"2018-05-01","customer_name":"Yaanvi","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25646","date":"2018-05-01","customer_name":"Sonal","state":"Bihar","city":"Patna"},{"id":"B-25647","date":"2018-05-03","customer_name":"Sharda","state":"Kerala","city":"Thiruvananthapuram"},{"id":"B-25648","date":"2018-05-04","customer_name":"Aditya","state":"Punjab","city":"Chandigarh"},{"id":"B-25649","date":"2018-05-05","customer_name":"Rachna","state":"Haryana","city":"Chandigarh"},{"id":"B-25650","date":"2018-05-06","customer_name":"Chirag","state":"Maharashtra","city":"Mumbai"},{"id":"B-25651","date":"2018-05-07","customer_name":"Anurag","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25652","date":"2018-05-08","customer_name":"Tushina","state":"Goa","city":"Goa"},{"id":"B-25653","date":"2018-05-08","customer_name":"Farah","state":"Nagaland","city":"Kohima"},{"id":"B-25654","date":"2018-05-10","customer_name":"Sabah","state":"Maharashtra","city":"Mumbai"},{"id":"B-25655","date":"2018-05-11","customer_name":"Nida","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25656","date":"2018-05-11","customer_name":"Priyanka","state":"Maharashtra","city":"Pune"},{"id":"B-25657","date":"2018-05-13","customer_name":"Tulika","state":"Madhya Pradesh","city":"Bhopal"},{"id":"B-25658","date":"2018-05-14","customer_name":"Shefali","state":"Rajasthan","city":"Jaipur"},{"id":"B-25659","date":"2018-05-15","customer_name":"Sanskriti","state":"West Bengal","city":"Kolkata"},{"id":"B-25660","date":"2018-05-16","customer_name":"Shruti","state":"Karnataka","city":"Bangalore"},{"id":"B-25661","date":"2018-05-17","customer_name":"Subhashree","state":"Jammu and Kashmir","city":"Kashmir"},{"id":"B-25662","date":"2018-05-17","customer_name":"Sweta","state":"Maharashtra","city":"Mumbai"},{"id":"B-25663","date":"2018-05-19","customer_name":"Pournamasi","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25664","date":"2018-05-20","customer_name":"Pratyusmita","state":"Bihar","city":"Patna"},{"id":"B-25665","date":"2018-05-21","customer_name":"Chayanika","state":"Kerala","city":"Thiruvananthapuram"},{"id":"B-25666","date":"2018-05-22","customer_name":"Tanvi","state":"Punjab","city":"Chandigarh"},{"id":"B-25667","date":"2018-05-23","customer_name":"Anjali","state":"Haryana","city":"Chandigarh"},{"id":"B-25668","date":"2018-05-24","customer_name":"Rhea","state":"Himachal Pradesh","city":"Simla"},{"id":"B-25669","date":"2018-05-25","customer_name":"Piyali","state":"Sikkim","city":"Gangtok"},{"id":"B-25670","date":"2018-05-25","customer_name":"Charika","state":"Goa","city":"Goa"},{"id":"B-25671","date":"2018-05-27","customer_name":"Mitali","state":"Nagaland","city":"Kohima"},{"id":"B-25672","date":"2018-05-28","customer_name":"Akanksha","state":"Andhra Pradesh","city":"Hyderabad"},{"id":"B-25673","date":"2018-05-28","customer_name":"Arsheen","state":"Gujarat","city":"Ahmedabad"},{"id":"B-25674","date":"2018-05-28","customer_name":"Mahima","state":"Maharashtra","city":"Pune"},{"id":"B-25675","date":"2018-05-31","customer_name":"Shreya","state":"Madhya Pradesh","city":"Bhopal"},{"id":"B-25676","date":"2018-06-01","customer_name":"Chandni","state":"Rajasthan","city":"Jaipur"},{"id":"B-25677","date":"2018-06-02","customer_name":"Ekta","state":"West Bengal","city":"Kolkata"},{"id":"B-25678","date":"2018-06-03","customer_name":"Bathina","state":"Karnataka","city":"Bangalore"},{"id":"B-25679","date":"2018-06-04","customer_name":"Avni","state":"Maharashtra","city":"Mumbai"},{"id":"B-25680","date":"2018-06-04","customer_name":"Aayushi","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25681","date":"2018-06-04","customer_name":"Bhawna","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25682","date":"2018-06-07","customer_name":"Krutika","state":"Bihar","city":"Patna"},{"id":"B-25683","date":"2018-06-08","customer_name":"Shreya","state":"Kerala","city":"Thiruvananthapuram"},{"id":"B-25684","date":"2018-06-09","customer_name":"Samiksha","state":"Maharashtra","city":"Mumbai"},{"id":"B-25685","date":"2018-06-10","customer_name":"Sheetal","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25686","date":"2018-06-11","customer_name":"Pooja","state":"Himachal Pradesh","city":"Simla"},{"id":"B-25687","date":"2018-06-11","customer_name":"Sanjna","state":"Maharashtra","city":"Mumbai"},{"id":"B-25688","date":"2018-06-11","customer_name":"Swetha","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25689","date":"2018-06-14","customer_name":"Bhaggyasree","state":"Maharashtra","city":"Mumbai"},{"id":"B-25690","date":"2018-06-15","customer_name":"Gunjan","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25691","date":"2018-06-16","customer_name":"Akancha","state":"Maharashtra","city":"Mumbai"},{"id":"B-25692","date":"2018-06-17","customer_name":"Rashmi","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25693","date":"2018-06-18","customer_name":"Parna","state":"Madhya Pradesh","city":"Bhopal"},{"id":"B-25694","date":"2018-06-18","customer_name":"Subhasmita","state":"Rajasthan","city":"Jaipur"},{"id":"B-25695","date":"2018-06-18","customer_name":"Suhani","state":"West Bengal","city":"Kolkata"},{"id":"B-25696","date":"2018-06-21","customer_name":"Noopur","state":"Karnataka","city":"Bangalore"},{"id":"B-25697","date":"2018-06-22","customer_name":"Vijay","state":"Jammu and Kashmir","city":"Kashmir"},{"id":"B-25698","date":"2018-06-23","customer_name":"Amisha","state":"Tamil Nadu","city":"Chennai"},{"id":"B-25699","date":"2018-06-24","customer_name":"Kritika","state":"Uttar Pradesh","city":"Lucknow"},{"id":"B-25700","date":"2018-06-25","customer_name":"Shubhi","state":"Maharashtra","city":"Mumbai"},{"id":"B-25701","date":"2018-06-26","customer_name":"Maithilee","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25702","date":"2018-06-27","customer_name":"Shaily","state":"Maharashtra","city":"Mumbai"},{"id":"B-25703","date":"2018-06-28","customer_name":"Ekta","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25704","date":"2018-06-29","customer_name":"Riya","state":"Maharashtra","city":"Mumbai"},{"id":"B-25705","date":"2018-06-30","customer_name":"Shweta","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25706","date":"2018-07-01","customer_name":"Swetlana","state":"Goa","city":"Goa"},{"id":"B-25707","date":"2018-07-01","customer_name":"Shivani","state":"Maharashtra","city":"Mumbai"},{"id":"B-25708","date":"2018-07-01","customer_name":"Kishwar","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25709","date":"2018-07-01","customer_name":"Aakanksha","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25710","date":"2018-07-05","customer_name":"Megha","state":"Maharashtra","city":"Pune"},{"id":"B-25711","date":"2018-07-06","customer_name":"Sakshi","state":"Madhya Pradesh","city":"Bhopal"},{"id":"B-25712","date":"2018-07-07","customer_name":"Adhvaita","state":"Rajasthan","city":"Jaipur"},{"id":"B-25713","date":"2018-07-08","customer_name":"Raksha","state":"West Bengal","city":"Kolkata"},{"id":"B-25714","date":"2018-07-09","customer_name":"Stuti","state":"Karnataka","city":"Bangalore"},{"id":"B-25715","date":"2018-07-10","customer_name":"Srishti","state":"Jammu and Kashmir","city":"Kashmir"},{"id":"B-25716","date":"2018-07-11","customer_name":"Surabhi","state":"Tamil Nadu","city":"Chennai"},{"id":"B-25717","date":"2018-07-12","customer_name":"Manshul","state":"Uttar Pradesh","city":"Lucknow"},{"id":"B-25718","date":"2018-07-12","customer_name":"Anjali","state":"Maharashtra","city":"Mumbai"},{"id":"B-25719","date":"2018-07-12","customer_name":"Rashmi","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25720","date":"2018-07-15","customer_name":"Namrata","state":"Punjab","city":"Chandigarh"},{"id":"B-25721","date":"2018-07-16","customer_name":"Anchal","state":"Haryana","city":"Chandigarh"},{"id":"B-25722","date":"2018-07-17","customer_name":"Inderpreet","state":"Himachal Pradesh","city":"Simla"},{"id":"B-25723","date":"2018-07-18","customer_name":"Wale","state":"Maharashtra","city":"Mumbai"},{"id":"B-25724","date":"2018-07-19","customer_name":"Sheetal","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25725","date":"2018-07-20","customer_name":"Anisha","state":"Nagaland","city":"Kohima"},{"id":"B-25726","date":"2018-07-21","customer_name":"Kiran","state":"Maharashtra","city":"Mumbai"},{"id":"B-25727","date":"2018-07-22","customer_name":"Turumella","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25728","date":"2018-07-22","customer_name":"Ameesha","state":"Maharashtra","city":"Pune"},{"id":"B-25729","date":"2018-07-22","customer_name":"Madhulika","state":"Madhya Pradesh","city":"Bhopal"},{"id":"B-25730","date":"2018-07-22","customer_name":"Rishabh","state":"Rajasthan","city":"Jaipur"},{"id":"B-25731","date":"2018-07-26","customer_name":"Akash","state":"West Bengal","city":"Kolkata"},{"id":"B-25732","date":"2018-07-27","customer_name":"Anubhaw","state":"Karnataka","city":"Bangalore"},{"id":"B-25733","date":"2018-07-28","customer_name":"Dhirajendu","state":"Maharashtra","city":"Mumbai"},{"id":"B-25734","date":"2018-07-29","customer_name":"Pranav","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25735","date":"2018-07-30","customer_name":"Arindam","state":"Uttar Pradesh","city":"Lucknow"},{"id":"B-25736","date":"2018-07-31","customer_name":"Akshat","state":"Maharashtra","city":"Mumbai"},{"id":"B-25737","date":"2018-08-01","customer_name":"Shubham","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25738","date":"2018-08-02","customer_name":"Ayush","state":"Punjab","city":"Chandigarh"},{"id":"B-25739","date":"2018-08-03","customer_name":"Daksh","state":"Haryana","city":"Chandigarh"},{"id":"B-25740","date":"2018-08-03","customer_name":"Rane","state":"Maharashtra","city":"Mumbai"},{"id":"B-25741","date":"2018-08-03","customer_name":"Navdeep","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25742","date":"2018-08-03","customer_name":"Ashwin","state":"Goa","city":"Goa"},{"id":"B-25743","date":"2018-08-07","customer_name":"Aman","state":"Nagaland","city":"Kohima"},{"id":"B-25744","date":"2018-08-08","customer_name":"Devendra","state":"Andhra Pradesh","city":"Hyderabad"},{"id":"B-25745","date":"2018-08-09","customer_name":"Kartik","state":"Gujarat","city":"Ahmedabad"},{"id":"B-25746","date":"2018-08-10","customer_name":"Shivam","state":"Maharashtra","city":"Pune"},{"id":"B-25747","date":"2018-08-11","customer_name":"Harsh","state":"Madhya Pradesh","city":"Bhopal"},{"id":"B-25748","date":"2018-08-12","customer_name":"Nitant","state":"Rajasthan","city":"Jaipur"},{"id":"B-25749","date":"2018-08-13","customer_name":"Ayush","state":"Maharashtra","city":"Mumbai"},{"id":"B-25750","date":"2018-08-14","customer_name":"Priyanshu","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25751","date":"2018-08-14","customer_name":"Nishant","state":"Maharashtra","city":"Mumbai"},{"id":"B-25752","date":"2018-08-14","customer_name":"Vaibhav","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25753","date":"2018-08-17","customer_name":"Shivam","state":"Uttar Pradesh","city":"Lucknow"},{"id":"B-25754","date":"2018-08-18","customer_name":"Akshay","state":"Bihar","city":"Patna"},{"id":"B-25755","date":"2018-08-19","customer_name":"Shourya","state":"Kerala","city":"Thiruvananthapuram"},{"id":"B-25756","date":"2018-08-20","customer_name":"Mohan","state":"Maharashtra","city":"Mumbai"},{"id":"B-25757","date":"2018-08-21","customer_name":"Mohit","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25758","date":"2018-08-22","customer_name":"Shubham","state":"Himachal Pradesh","city":"Simla"},{"id":"B-25759","date":"2018-08-23","customer_name":"Soumya","state":"Sikkim","city":"Gangtok"},{"id":"B-25760","date":"2018-08-24","customer_name":"Pooja","state":"Goa","city":"Goa"},{"id":"B-25761","date":"2018-08-25","customer_name":"Surabhi","state":"Maharashtra","city":"Mumbai"},{"id":"B-25762","date":"2018-08-26","customer_name":"Anudeep","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25763","date":"2018-08-27","customer_name":"Noshiba","state":"Gujarat","city":"Ahmedabad"},{"id":"B-25764","date":"2018-08-28","customer_name":"Sanjova","state":"Maharashtra","city":"Pune"},{"id":"B-25765","date":"2018-08-29","customer_name":"Meghana","state":"Madhya Pradesh","city":"Bhopal"},{"id":"B-25766","date":"2018-08-30","customer_name":"Surabhi","state":"Rajasthan","city":"Jaipur"},{"id":"B-25767","date":"2018-08-31","customer_name":"Ashmeet","state":"West Bengal","city":"Kolkata"},{"id":"B-25768","date":"2018-09-01","customer_name":"Shreyoshe","state":"Karnataka","city":"Bangalore"},{"id":"B-25769","date":"2018-09-02","customer_name":"Surbhi","state":"Maharashtra","city":"Mumbai"},{"id":"B-25770","date":"2018-09-02","customer_name":"Sakshi","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25771","date":"2018-09-02","customer_name":"Vaibhavi","state":"Uttar Pradesh","city":"Lucknow"},{"id":"B-25772","date":"2018-09-02","customer_name":"Sanjana","state":"Bihar","city":"Patna"},{"id":"B-25773","date":"2018-09-06","customer_name":"Shreya","state":"Kerala","city":"Thiruvananthapuram"},{"id":"B-25774","date":"2018-09-07","customer_name":"Snehal","state":"Punjab","city":"Chandigarh"},{"id":"B-25775","date":"2018-09-08","customer_name":"Duhita","state":"Haryana","city":"Chandigarh"},{"id":"B-25776","date":"2018-09-09","customer_name":"Mousam","state":"Maharashtra","city":"Mumbai"},{"id":"B-25777","date":"2018-09-10","customer_name":"Aditi","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25778","date":"2018-09-11","customer_name":"Surabhi","state":"Maharashtra","city":"Mumbai"},{"id":"B-25779","date":"2018-09-12","customer_name":"Savi","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25780","date":"2018-09-13","customer_name":"Teena","state":"Andhra Pradesh","city":"Hyderabad"},{"id":"B-25781","date":"2018-09-14","customer_name":"Rutuja","state":"Gujarat","city":"Ahmedabad"},{"id":"B-25782","date":"2018-09-15","customer_name":"Aayushi","state":"Maharashtra","city":"Mumbai"},{"id":"B-25783","date":"2018-09-15","customer_name":"Shivangi","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25784","date":"2018-09-15","customer_name":"Rohit","state":"Rajasthan","city":"Jaipur"},{"id":"B-25785","date":"2018-09-15","customer_name":"Ayush","state":"West Bengal","city":"Kolkata"},{"id":"B-25786","date":"2018-09-19","customer_name":"Abhishek","state":"Karnataka","city":"Bangalore"},{"id":"B-25787","date":"2018-09-20","customer_name":"Asish","state":"Jammu and Kashmir","city":"Kashmir"},{"id":"B-25788","date":"2018-09-21","customer_name":"Dinesh","state":"Tamil Nadu","city":"Chennai"},{"id":"B-25789","date":"2018-09-22","customer_name":"Akshay","state":"Uttar Pradesh","city":"Lucknow"},{"id":"B-25790","date":"2018-09-23","customer_name":"Sajal","state":"Bihar","city":"Patna"},{"id":"B-25791","date":"2018-09-24","customer_name":"Avish","state":"Kerala","city":"Thiruvananthapuram"},{"id":"B-25792","date":"2018-09-24","customer_name":"Abhishek","state":"Maharashtra","city":"Mumbai"},{"id":"B-25793","date":"2018-09-24","customer_name":"Siddharth","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25794","date":"2018-09-24","customer_name":"Aditya","state":"Himachal Pradesh","city":"Simla"},{"id":"B-25795","date":"2018-09-24","customer_name":"Sukant","state":"Sikkim","city":"Gangtok"},{"id":"B-25796","date":"2018-09-24","customer_name":"Sukrith","state":"Maharashtra","city":"Mumbai"},{"id":"B-25797","date":"2018-09-30","customer_name":"Sauptik","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25798","date":"2018-10-01","customer_name":"Shishu","state":"Andhra Pradesh","city":"Hyderabad"},{"id":"B-25799","date":"2018-10-01","customer_name":"Divyansh","state":"Gujarat","city":"Ahmedabad"},{"id":"B-25800","date":"2018-10-01","customer_name":"Ishit","state":"Maharashtra","city":"Pune"},{"id":"B-25801","date":"2018-10-01","customer_name":"Aryan","state":"Madhya Pradesh","city":"Bhopal"},{"id":"B-25802","date":"2018-10-05","customer_name":"Yash","state":"Maharashtra","city":"Mumbai"},{"id":"B-25803","date":"2018-10-05","customer_name":"Shivanshu","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25804","date":"2018-10-05","customer_name":"Sudheer","state":"Karnataka","city":"Bangalore"},{"id":"B-25805","date":"2018-10-05","customer_name":"Ankit","state":"Maharashtra","city":"Mumbai"},{"id":"B-25806","date":"2018-10-06","customer_name":"Dhanraj","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25807","date":"2018-10-07","customer_name":"Vipul","state":"Uttar Pradesh","city":"Lucknow"},{"id":"B-25808","date":"2018-10-08","customer_name":"Apsingekar","state":"Bihar","city":"Patna"},{"id":"B-25809","date":"2018-10-09","customer_name":"Suman","state":"Kerala","city":"Thiruvananthapuram"},{"id":"B-25810","date":"2018-10-10","customer_name":"Nripraj","state":"Punjab","city":"Chandigarh"},{"id":"B-25811","date":"2018-10-10","customer_name":"Utsav","state":"Maharashtra","city":"Mumbai"},{"id":"B-25812","date":"2018-10-10","customer_name":"Kshitij","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25813","date":"2018-10-10","customer_name":"Hrisheekesh","state":"Maharashtra","city":"Mumbai"},{"id":"B-25814","date":"2018-10-10","customer_name":"Swapnil","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25815","date":"2018-10-10","customer_name":"Harsh","state":"Nagaland","city":"Kohima"},{"id":"B-25816","date":"2018-10-12","customer_name":"Mane","state":"Andhra Pradesh","city":"Hyderabad"},{"id":"B-25817","date":"2018-10-13","customer_name":"Praneet","state":"Maharashtra","city":"Mumbai"},{"id":"B-25818","date":"2018-10-14","customer_name":"Sandeep","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25819","date":"2018-10-15","customer_name":"Ankur","state":"Madhya Pradesh","city":"Bhopal"},{"id":"B-25820","date":"2018-10-16","customer_name":"Dheeraj","state":"Rajasthan","city":"Jaipur"},{"id":"B-25821","date":"2018-10-16","customer_name":"Ajay","state":"West Bengal","city":"Kolkata"},{"id":"B-25822","date":"2018-10-18","customer_name":"Tejas","state":"Karnataka","city":"Bangalore"},{"id":"B-25823","date":"2018-10-18","customer_name":"Rohan","state":"Maharashtra","city":"Mumbai"},{"id":"B-25824","date":"2018-10-20","customer_name":"Shyam","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25825","date":"2018-10-21","customer_name":"Kartik","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25826","date":"2018-10-22","customer_name":"Tanushree","state":"Maharashtra","city":"Mumbai"},{"id":"B-25827","date":"2018-10-23","customer_name":"Sheetal","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25828","date":"2018-10-24","customer_name":"Nikita","state":"Punjab","city":"Chandigarh"},{"id":"B-25829","date":"2018-10-25","customer_name":"Apoorva","state":"Haryana","city":"Chandigarh"},{"id":"B-25830","date":"2018-10-26","customer_name":"Aastha","state":"Himachal Pradesh","city":"Simla"},{"id":"B-25831","date":"2018-10-27","customer_name":"Mahima","state":"Sikkim","city":"Gangtok"},{"id":"B-25832","date":"2018-10-28","customer_name":"Harshita","state":"Maharashtra","city":"Mumbai"},{"id":"B-25833","date":"2018-10-29","customer_name":"Krishna","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25834","date":"2018-10-29","customer_name":"Ananya","state":"Andhra Pradesh","city":"Hyderabad"},{"id":"B-25835","date":"2018-10-29","customer_name":"Moumita","state":"Gujarat","city":"Ahmedabad"},{"id":"B-25836","date":"2018-10-29","customer_name":"Arti","state":"Maharashtra","city":"Pune"},{"id":"B-25837","date":"2018-10-29","customer_name":"Palak","state":"Maharashtra","city":"Mumbai"},{"id":"B-25838","date":"2018-10-29","customer_name":"Sanjana","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25839","date":"2018-10-30","customer_name":"Pranjali","state":"West Bengal","city":"Kolkata"},{"id":"B-25840","date":"2018-10-31","customer_name":"Sneha","state":"Karnataka","city":"Bangalore"},{"id":"B-25841","date":"2018-11-01","customer_name":"Ashvini","state":"Maharashtra","city":"Mumbai"},{"id":"B-25842","date":"2018-11-02","customer_name":"Sheetal","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25843","date":"2018-11-03","customer_name":"Mrunal","state":"Maharashtra","city":"Mumbai"},{"id":"B-25844","date":"2018-11-03","customer_name":"Swati","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25845","date":"2018-11-03","customer_name":"Snel","state":"Kerala","city":"Thiruvananthapuram"},{"id":"B-25846","date":"2018-11-03","customer_name":"Soodesh","state":"Punjab","city":"Chandigarh"},{"id":"B-25847","date":"2018-11-03","customer_name":"Aniket","state":"Haryana","city":"Chandigarh"},{"id":"B-25848","date":"2018-11-03","customer_name":"Rohan","state":"Himachal Pradesh","city":"Simla"},{"id":"B-25849","date":"2018-11-04","customer_name":"K","state":"Sikkim","city":"Gangtok"},{"id":"B-25850","date":"2018-11-05","customer_name":"Abhishek","state":"Goa","city":"Goa"},{"id":"B-25851","date":"2018-11-06","customer_name":"Kushal","state":"Nagaland","city":"Kohima"},{"id":"B-25852","date":"2018-11-07","customer_name":"Soumyabrata","state":"Andhra Pradesh","city":"Hyderabad"},{"id":"B-25853","date":"2018-11-08","customer_name":"Gaurav","state":"Gujarat","city":"Ahmedabad"},{"id":"B-25854","date":"2018-11-08","customer_name":"Shubham","state":"Maharashtra","city":"Pune"},{"id":"B-25855","date":"2018-11-08","customer_name":"Abhijeet","state":"Madhya Pradesh","city":"Bhopal"},{"id":"B-25856","date":"2018-11-10","customer_name":"Abhijeet","state":"Maharashtra","city":"Mumbai"},{"id":"B-25857","date":"2018-11-10","customer_name":"Anand","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25858","date":"2018-11-13","customer_name":"Swapnil","state":"Maharashtra","city":"Mumbai"},{"id":"B-25859","date":"2018-11-14","customer_name":"Chikku","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25860","date":"2018-11-15","customer_name":"Akshay","state":"Tamil Nadu","city":"Chennai"},{"id":"B-25861","date":"2018-11-15","customer_name":"Aayush","state":"Uttar Pradesh","city":"Lucknow"},{"id":"B-25862","date":"2018-11-15","customer_name":"Amol","state":"Bihar","city":"Patna"},{"id":"B-25863","date":"2018-11-15","customer_name":"Manibalan","state":"Kerala","city":"Thiruvananthapuram"},{"id":"B-25864","date":"2018-11-15","customer_name":"Aromal","state":"Maharashtra","city":"Mumbai"},{"id":"B-25865","date":"2018-11-15","customer_name":"Arun","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25866","date":"2018-11-16","customer_name":"Komal","state":"Himachal Pradesh","city":"Simla"},{"id":"B-25867","date":"2018-11-17","customer_name":"Ankit","state":"Sikkim","city":"Gangtok"},{"id":"B-25868","date":"2018-11-18","customer_name":"Vikash","state":"Goa","city":"Goa"},{"id":"B-25869","date":"2018-11-19","customer_name":"Parakh","state":"Nagaland","city":"Kohima"},{"id":"B-25870","date":"2018-11-20","customer_name":"Pranav","state":"Andhra Pradesh","city":"Hyderabad"},{"id":"B-25871","date":"2018-11-21","customer_name":"Gunjal","state":"Gujarat","city":"Surat"},{"id":"B-25872","date":"2018-11-22","customer_name":"Saurabh","state":"Maharashtra","city":"Mumbai"},{"id":"B-25873","date":"2018-11-23","customer_name":"Divyeta","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25874","date":"2018-11-24","customer_name":"Megha","state":"Rajasthan","city":"Udaipur"},{"id":"B-25875","date":"2018-11-24","customer_name":"Divyeshkumar","state":"Uttar Pradesh","city":"Allahabad"},{"id":"B-25876","date":"2018-11-24","customer_name":"Bhosale","state":"Punjab","city":"Amritsar"},{"id":"B-25877","date":"2018-11-24","customer_name":"Dashyam","state":"Gujarat","city":"Surat"},{"id":"B-25878","date":"2018-11-24","customer_name":"Mrinal","state":"Maharashtra","city":"Mumbai"},{"id":"B-25879","date":"2018-11-24","customer_name":"Siddharth","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25880","date":"2018-11-24","customer_name":"Apoorv","state":"Rajasthan","city":"Udaipur"},{"id":"B-25881","date":"2018-11-25","customer_name":"Pooja","state":"Uttar Pradesh","city":"Allahabad"},{"id":"B-25882","date":"2018-11-26","customer_name":"Masurkar","state":"Punjab","city":"Amritsar"},{"id":"B-25883","date":"2018-11-27","customer_name":"Saptadeep","state":"Gujarat","city":"Surat"},{"id":"B-25884","date":"2018-11-28","customer_name":"Sumeet","state":"Maharashtra","city":"Mumbai"},{"id":"B-25885","date":"2018-11-28","customer_name":"Shatayu","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25886","date":"2018-11-28","customer_name":"Brijesh","state":"Rajasthan","city":"Udaipur"},{"id":"B-25887","date":"2018-12-01","customer_name":"Vedant","state":"Uttar Pradesh","city":"Allahabad"},{"id":"B-25888","date":"2018-12-02","customer_name":"Rohan","state":"Punjab","city":"Amritsar"},{"id":"B-25889","date":"2018-12-03","customer_name":"Abhishek","state":"Gujarat","city":"Surat"},{"id":"B-25890","date":"2018-12-04","customer_name":"Divyansha","state":"Maharashtra","city":"Mumbai"},{"id":"B-25891","date":"2018-12-04","customer_name":"Shivani","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25892","date":"2018-12-04","customer_name":"Aditi","state":"Rajasthan","city":"Udaipur"},{"id":"B-25893","date":"2018-12-04","customer_name":"Aashna","state":"Uttar Pradesh","city":"Allahabad"},{"id":"B-25894","date":"2018-12-04","customer_name":"Monu","state":"Punjab","city":"Amritsar"},{"id":"B-25895","date":"2018-12-04","customer_name":"Sathya","state":"Gujarat","city":"Surat"},{"id":"B-25896","date":"2018-12-05","customer_name":"Aman","state":"Maharashtra","city":"Mumbai"},{"id":"B-25897","date":"2018-12-06","customer_name":"Rohan","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25898","date":"2018-12-07","customer_name":"Abhishek","state":"Rajasthan","city":"Udaipur"},{"id":"B-25899","date":"2018-12-08","customer_name":"Aishwarya","state":"Uttar Pradesh","city":"Allahabad"},{"id":"B-25900","date":"2018-12-09","customer_name":"Anand","state":"Punjab","city":"Amritsar"},{"id":"B-25901","date":"2018-12-10","customer_name":"Suraj","state":"Gujarat","city":"Surat"},{"id":"B-25902","date":"2018-12-10","customer_name":"Ishpreet","state":"Maharashtra","city":"Mumbai"},{"id":"B-25903","date":"2018-12-10","customer_name":"Amlan","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25904","date":"2018-12-10","customer_name":"Swapnil","state":"Delhi","city":"Delhi"},{"id":"B-25905","date":"2018-12-11","customer_name":"Bhargav","state":"Madhya Pradesh","city":"Delhi"},{"id":"B-25906","date":"2018-12-11","customer_name":"Abhijit","state":"Delhi","city":"Delhi"},{"id":"B-25907","date":"2018-12-11","customer_name":"Jaydeep","state":"Madhya Pradesh","city":"Bhopal"},{"id":"B-25908","date":"2018-12-12","customer_name":"Pradeep","state":"Delhi","city":"Delhi"},{"id":"B-25909","date":"2018-12-13","customer_name":"Sujay","state":"Madhya Pradesh","city":"Delhi"},{"id":"B-25910","date":"2018-12-14","customer_name":"Jay","state":"Delhi","city":"Delhi"},{"id":"B-25911","date":"2018-12-15","customer_name":"Phalguni","state":"Madhya Pradesh","city":"Bhopal"},{"id":"B-25912","date":"2018-12-16","customer_name":"Preksha","state":"Delhi","city":"Delhi"},{"id":"B-25913","date":"2018-12-17","customer_name":"Geetanjali","state":"Madhya Pradesh","city":"Delhi"},{"id":"B-25914","date":"2018-12-18","customer_name":"Kajal","state":"Delhi","city":"Delhi"},{"id":"B-25915","date":"2018-12-19","customer_name":"Sukruta","state":"Punjab","city":"Amritsar"},{"id":"B-25916","date":"2018-12-20","customer_name":"Utkarsh","state":"Gujarat","city":"Surat"},{"id":"B-25917","date":"2018-12-21","customer_name":"Sanjay","state":"Maharashtra","city":"Mumbai"},{"id":"B-25918","date":"2018-12-22","customer_name":"Karandeep","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25919","date":"2018-12-23","customer_name":"Neha","state":"Rajasthan","city":"Udaipur"},{"id":"B-25920","date":"2018-12-24","customer_name":"Jayanti","state":"Uttar Pradesh","city":"Allahabad"},{"id":"B-25921","date":"2018-12-25","customer_name":"Sandra","state":"Punjab","city":"Amritsar"},{"id":"B-25922","date":"2018-12-26","customer_name":"Akshata","state":"Gujarat","city":"Surat"},{"id":"B-25923","date":"2018-12-27","customer_name":"Vishakha","state":"Maharashtra","city":"Mumbai"},{"id":"B-25924","date":"2018-12-28","customer_name":"Prajakta","state":"Karnataka","city":"Bangalore"},{"id":"B-25925","date":"2018-12-29","customer_name":"Shruti","state":"Maharashtra","city":"Mumbai"},{"id":"B-25926","date":"2018-12-30","customer_name":"Dipali","state":"Madhya Pradesh","city":"Indore"},{"id":"B-25927","date":"2018-12-31","customer_name":"Shreya","state":"Uttar Pradesh","city":"Lucknow"}]},"data_source_id":14,"runtime":0.02677464485168457,"retrieved_at":"2023-10-22T17:57:34.735+08:00"}}}""",
        }
    ]

    num_tokens = num_tokens_from_messages(message)
    print("num_tokens : ", num_tokens)
